<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<!--DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr-fr">

<html><head>
<meta http-equiv="Content-type" content="text/html; charset=UTF-8">
<script language="javascript" src="../../../tablespassage/tablepass.js?updated=1234567890"></script>

<script language="javascript" src="../../../mapsILIADE.js?updated=1234567890"></script>
<script language="javascript">
    var urlvar=''
    var mt2="xxxx"
	var mpt2="xxxx"
    if (window.location.search != '') {
    longueur = window.location.search.length - 1;
    
    data = window.location.search.substr(1,longueur);
    donnees = data.split('&');
    urlvar = new Array();
    urlvarnum = new Array();
    for (var i=0; i < donnees.length; i++) {
    position = donnees[i].indexOf('=');
    variable = donnees[i].substr(0,position);
    pos = position + 1;
    valeur = decodeURI(donnees[i].substr(pos,donnees[i].length));
    while (valeur.search(/\+/) != -1)
    valeur = valeur.replace(/\+/,' ');
    urlvar[variable] = valeur;
    urlvarnum[i] = valeur;
    }
    }

var mpt2="xxxx"
if(urlvar['mpt2']){mpt2=urlvar['mpt2']}else{mpt2='xxxx'}

var MAPICI=mapX
var LIBELICI=libelmap
mapX=new Array()
libelmap=new Array()
var selectedrezo
var selectedrezoTemp
var rezo=new Array()
var nomrezo=new Array()
</script>
<script language="javascript">if(typeof(InRezo)=='undefined'){var InRezo=new Array(); for(i=0;i<rezo.length;i++){InRezo[rezo.length]="Summary not available"}}</script>
<script language="javascript" src="../../transdata_rezo/rezo.js?updated=1234567890"></script>
<script id="localWindRose" language="javascript" src="http://localhost/REZOperso.js?updated=1234567890"></script>
<script  language="javascript" >if(rezo.length-InRezo.length>0){for(i=0;i<rezo.length;i++){InRezo[InRezo.length]="Summary not available"}}</script>

<script language="javascript">if(typeof(InRezo)=='undefined'){var InRezo=new Array(); for(i=0;i<rezo.length;i++){InRezo[rezo.length]="Summary not available"}}</script>
<script language="javascript" src="http://altko.org/admin_rezo/rezo.js?updated=1234567890"></script>
<script  language="javascript" >if(rezo.length-InRezo.length>0){for(i=0;i<rezo.length;i++){InRezo[InRezo.length]="Summary not available"}}</script>
<script id="mapsRezo" onload="" language="javascript" ></script>
<script language="javascript" src="../../../mapsILIADEmotpas.js?updated=1234567890"></script>
<script type="text/javascript">
var temp_mapX=new Array()
temp_mapX=mapX

var mt
var idmt=0


var aw2=window.location.href.split("?")[0]
if(mpt2==mt2){
mt=prompt("saisissez votre mot de passe",mt2);
}else{mt=mpt2}
for(i=0;i<mtpas.length;i++){
if(mt==mtpas[i]){idmt=1}

}
var retconfirm=false
if(idmt!=1){
retconfirm=confirm("désolé, votre mot de passe est incorrect, voulez vous recommencer?");
if(retconfirm==true){

window.location.href=aw2
}else{
window.location.href="../../vide.html"

}
}



</script>

<script language="javascript" >

var indictable="zerotable"
var menucumul=new Array()
var menutransTEMP=new Array()
var CumulMenuTransfert=new Array()
var CumulDataToTransfert=new Array()
var lignDataToTransfert=new Array("z","w")
var initx=0
var init=0
var selectedindextemp2=0
var selectedindextemp=0
var postemp=0
var postemp2=0
function init1(){init=1}
function init0(){init=0}
var rg=0
var sel=1
var sel2=1
var n
var repcarte
var repcarte2
var mapsorig

var pdd=aw2.replace("A-MANAGER-local/CopyMapFolder/lister3/transMapFolder.htm","")
var pageici=aw2
function BL(){ //début signal chargement top.BL()

document.getElementById("divloading").style.top=200+'px'
top.frames.FloadingBis.location.href="vide.htm" //introduit une interruption dans le cycle firefox et permet ainsi de forcer l'affichage du signal de téléchargement

}
function EL(){//fin signal chargement  top.EL()

document.getElementById("divloading").style.top=-1000+'px'

}




function initmenus(){
document.carte2.selectcartes2.selectedIndex=0
document.carte.selectcartes.selectedIndex=0


}
function nomcartenew(){
a=window.prompt("Vous n'avez pas indiqué de nom : indiquez le nom du répertoire de la carte (sans caractères spéciaux")
if(a=="" || a==" "){a=nomcartenew()}
return a
}
var chgt=1
var nonchoix=1
var numMapx=-1
function selectrepertoires(a){
if(a==1){a=0}
numMapx=a

repcarte=mapX[a+4]
repcarteTemp=repcarte
prechoix=repcarte
if(nonchoix==1){
chgt=1




var ik=0
		// test sur l'existance ou non d'un dossier du même nom que l'importé et décisions dans le cas positif
		for(i=0;i<MAPICI.length;i+=5){
		
		if(MAPICI[i+4]==repcarte){

		alert("Le nom du répertoires que vous importez existe déjà ! \nVous avez deux solutions :  \n1 - Garder le même nom : \n     Dans ce cas, vous allez écraser des fichiers existants :\n     Soyez vigilant dans la sélection des fichiers lors de l'étape suivante\n2 - Choisissez de changez un nom :\n     Cela va créer un nouveau répertoire pour copier le dossier que vos importez ")

		i=MAPICI.length+1000
		ik=1000
		}
		
		ik+=1
		

		}		
if(ik>999){
		repcarte=window.prompt("indiquez le nom du répertoire final de la carte (sans caractères spéciaux ni accents,\n ou bien choisissez annulez  pour écraser les données dans le répertoire déjà existant ")
		
}else{
repcarte=window.prompt("indiquez le nom du répertoire final de la carte (sans caractères spéciaux ni accents,\n ou bien choisissez annulez  conserver le nom  "+repcarteTemp+" du dossier importé ")
}
prechoix=repcarte
var annul0=0



if(typeof(repcarte)=='object'){
prechoix=repcarteTemp ;
repcarte=repcarteTemp ;
afficheListeDestination(repcarteTemp) ;
if(ik>999){
nonchoix=0;
document.getElementById('NonChoix2').checked=true;
document.getElementById('listedestination').style.display='block';
chgt=0
}else{

}
}

//repcarteTemp est le dossier importé et repcarte est ici le nom choisi pour le dossier
// si le nouveau nom choisi diffère du nom d'origine, il y changement -> chgt=1 et il faudra changer les paramètres de DATA-mappocoord.js et ajouter un bloc carte à mapsIliade.js
if(repcarteTemp!=repcarte){chgt=1}else{chgt=0}
if(ik<1000){chgt=1; annul0=0;}// si lors du test sur l'xistance d'un répertoire du même nom, il n'en a pas été trouvé, alors il faut créer un répertoire, -> chgt=1 donc écrire DATA-mappocoord.js et ajouter un bloc carte à mapsIliade.js
if(annul0==0){
if(numMapx>-1){
document.getElementById("boutonenvoie").style.display="block"
}

}else{window.location.href=pageici+"?mpt2="+mt}
			}else{// cas choix du dossier de destination parmi les dossier existant dans la plateforme _> pas de création de bloc dans MapsIlialde.js ni de modifs de DATA-mappocoord.js
			repcarte=repcible
			chgt=0
			if(numMapx>0){
			document.getElementById("boutonenvoie").style.display="block"
			}
			
			}
destinationX()
}
function envoie(){

window.location.href=selectedrezoTemp+"A-MANAGER-local/CopyMapFolder/lister3/ModuleMAJ.php?repcible=../../"+prechoix+"&rep=../../"+repcarteTemp+"&plateforme="+selectedrezoTemp+"&pdd="+pdd+"&chgt="+chgt+"&nummapx="+(numMapx)
}
function destinationX(){
document.getElementById("destinationx").innerHTML="<small>Repertoire de 'destination':<b style='color:red'>"+prechoix+"</b></small>"
}
var repcible=""
var listedest=""
var prechoix=""
function afficheListeDestination(prechoix){
listedest=""
for(i=0;i<MAPICI.length;i=i+5){
var xcheckef=""
if (prechoix==MAPICI[i+4]){repcible=MAPICI[i+4];xcheckef="checked"}
listedest+='<input type="radio" name="destselect" onclick="repcible=\''+MAPICI[i+4]+'\';prechoix=repcible;destinationX()" '+xcheckef+' >'+MAPICI[i+4]+'<br/>'

}
document.getElementById("listedestination").innerHTML=listedest
}


var selectedmaille=""
var selectedmaille2=""
function change_maille() {

var site = document.maille.selectmaille.selectedIndex;
selectedmaille=document.maille.selectmaille.options[site].value;

affichmenusmaps()
}

function change_site() {

var site = document.carte.selectcartes.selectedIndex;
nonchoix=1;
document.getElementById('NonChoix1').checked=true


//alert(parseInt(document.carte.selectcartes.options[site].value)+"    "+((site-1)*5))
selectrepertoires(parseInt(document.carte.selectcartes.options[site].value))
selectedindextemp=site

postemp=site
document.carte.selectcartes.selectedIndex=postemp
document.getElementById("originex").innerHTML="<small>Répertoire 'source':<b style='color:green'>"+repcarteTemp+"</b></small>"

}






var Id="";var Valu="";var Onclk="";var Txt="";var idSelect=""

function creatOption(Id,Valu,Onclk,Txt,idSelect){

				var nouveaux0=document.createElement("option")
				if(Valu!=""){nouveaux0.setAttribute("value",Valu)}
				if(Id!=""){nouveaux0.setAttribute("id",Id)}
				if(Onclk!=""){nouveaux0.setAttribute("onclick",Onclk)}
				var nt1=document.createTextNode(Txt)
				nouveaux0.appendChild(nt1)
				document.getElementById(idSelect).appendChild(nouveaux0)
}


var menu1=""
var menu2=""
function affichmenusmaps(){
document.getElementById("selectcartes").innerHTML=""
menu1='<option id="option0" value="javascript:rien2()">&nbsp;Cartes</option>'


				
				
				creatOption("option0","javascript:rien2()",""," Cartes","selectcartes")


var kc=0
for(i=0;i<mapX.length;i=i+5){
kc+=1
if(selectedmaille==mapX[i+0]){
menu1+='<option id="option'
menu1+=kc


menu1+='"   VALUE="'+i+'">'//
menu1+=kc
menu1+="-"
menu1+=mapX[i+4]
menu1+='</option>'


				
				
				creatOption("option"+kc,i,"",kc+'-'+mapX[i+4],"selectcartes")


}
}

//------fin menu1
}
function affichmenusmaps2(){
document.getElementById("selectcartes2").innerHTML=""
menu2='<option id="option2" value="javascript:rien2()">&nbsp;Cartes</option>'

				
				
								
				creatOption("option20","javascript:rien2()",""," Cartes","selectcartes2")

var kc=0
for(i=0;i<MAPICI.length;i=i+5){
kc+=1
if(selectedmaille2==MAPICI[i]){
menu2+='<option id="option2'
menu2+=kc


menu2+='"    VALUE="'+i+'">'//
menu2+=kc
menu2+="-"
menu2+=MAPICI[i+4]
menu2+='</option>'


				
				
				creatOption("option2"+kc,(i+1),"",kc+'-'+MAPICI[i+4],"selectcartes2")
}

}


}

function change_rezo(){

mapX=new Array()

var site = document.rezo.selectrezo.selectedIndex;
selectedrezo=document.rezo.selectrezo.options[site].value.replace("A-MANAGER-local/CopyMapFolder/lister3/transMapFolder.htm","");
selectedrezoTemp=selectedrezo

document.getElementById("mapsRezo").src=selectedrezo+"/mapsILIADE.js?updated=1234567890"

document.getElementById("divrezo").innerHTML="<small></small>"
document.getElementById("platoriginex").innerHTML="<small>Plateforme 'source':<b style='color:red'>"+nomrezo[site-1]+"</b></small>"
}

function affichmaille(){

document.getElementById("selectmaille").innerHTML=""
menumaille='<option id="option0" value="javascript:rien2()">&nbsp;Maille</option>'

				
				creatOption("optionM0","javascript:rien2()",""," Maille","selectmaille")
				
var kc=0
for(i=0;i<mapX.length;i=i+5){
kc+=1
menumaille+='<option id="optionM'
menumaille+=(kc)


menumaille+='"    VALUE="'+mapX[i+0]+'">'//
menumaille+=(kc)
menumaille+="-"
menumaille+=mapX[i+4]+" : maille= "+mapX[i+0]+" - "+libelmap[(i/5)][1]
menumaille+='</option>'

				creatOption("optionM"+kc,mapX[i+0],"",kc+'-'+mapX[i+4]+" : maille= "+mapX[i+0]+" - "+libelmap[(i/5)][1],"selectmaille")
}

}

function affichmaille2(){}



</script>






<script language="javascript">






</script>

</head><body STYLE="font-family:arial;">
 <div style="position:absolute;top:0px;left:0px"><input type="button" onclick="window.location.href=pageici+'?mpt2='+mt" value="Redémarrer le module transfert"></div>
 <br><b>TRANSFERT de <span style="color:brown">DOSSIERS CARTES</span> en Réseau</b>
<div id="platoriginex"><br></div>
<div id="originex"><br></div>
<div id="destinationx"><br></div>
<span style="position:absolute;top:30px;left:0px">

		 <div style="position:absolute;top:80px;left:210px">
		 <table style="font-size:9px; font-weight:bold;width:300px">
		 <tr>
		 <td style="text-align:center">
		 Transfert simple
		 </td><td style="text-align:center">
		 Choix du dossier de destination dans cette plateforme
		 </td>
		 </tr>
		 <tr>
		 <td style="text-align:center">
		 <input type="radio" name="NonChoix" id="NonChoix1" onclick="nonchoix=1;document.getElementById('listedestination').style.display='none';selectrepertoires(numMapx)" checked>
		 </td><td style="text-align:center">
		 <input type="radio" name="NonChoix" id="NonChoix2" onclick="nonchoix=0;document.getElementById('listedestination').style.display='block';selectrepertoires(numMapx)" >
		 </td>
		 </tr>
		 <tr>
		 <td style="text-align:center">
		
		 </td><td style="text-align:left">
		 <div id="listedestination" style="display:none;height:200px;overflow:scroll">
		 
		 </div>
		 </td>
		 </tr>
		 </table>
		 
		 </div>




<script language="javascript">







</script>
<script language="javascript">

document.write('<div id="divrezo" style="position: absolute; height: 24px; top: 80px;  width:300px"><form name="rezo"><select id="selectrezo" name="selectrezo" onchange="change_rezo()"   style="background-color: white; color: black;width:200px" size="1"><option id="optionRezo0" value="javascript:rien2()">&nbsp;REZO</option>')

for(i=0;i<rezo.length;i++){

document.write('<option id="optionRezo')
document.write(i)


document.write('"    VALUE="'+rezo[i]+'">')//
document.write(i+1)
document.write("-")
document.write("plateforme : "+nomrezo[i])
document.write('</option>')

}
document.write('</select></form></div>')






document.write('<div style="position: absolute; height: 24px; top: 105px; "><form name="maille"><select id="selectmaille" name="selectmaille" onchange="change_maille()"   style="background-color: white; color: black;width:200px" size="1">')

document.write('</select></form></div>')





document.write('<div id="divfermer" style="position: absolute;  top: 44px;visibility:hidden "><dt><small><small>Type de menus</small></small></dt><input type="radio"  id="T_1" name="T" value="1" onClick="sel=1;initX()"><small><small>icones</small></small></input><input type="radio" id="T_2" name="T" value="2" onClick="sel=2;initX()" value="0" type="text"><small><small>graph</small></small></imput></div>')

document.write('<div style="position: absolute; height: 24px; top: 127px; "><form name="carte"><select id="selectcartes" name="selectcartes" onchange="change_site()" onmouseoverx="document.carte.selectcartes.selectedIndex=0" onmouseoutx="document.carte.selectcartes.selectedIndex=postemp"  style="background-color: white; color: black;width:200px" size="1">')
// ici options
document.write('</select></form><br><br><br><div ><input style="display:none" id="boutonenvoie" type="button" onclick="envoie()" value="transférer"></div></div>')


function repetaffm(){
if(mapX.length){

affichmaille();affichmaille2()// affiche le menu maille de la plateforme courante , c'est à dire  la plateforme du fichier destination
}else{setTimeout('repetaffm()',500)}
}
repetaffm()

nonchoix=1;
document.getElementById('NonChoix1').checked=true

afficheListeDestination(prechoix)
</script>
</span>
<div id="divloading" style="position:absolute;top:-1000px;left:400px;color:gray;visibility:visible;z-index:100000"><center><img id="loading" style="background-color:white;" width=60 border="0px" src="../../../loading.gif"><br>CHARGEMENT en COURS</center></div>
</div>

</body >
</html>